{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\React\\\\react_staging\\\\src\\\\pages\\\\Test\\\\index.jsx\";\nimport { Component } from \"react\";\n\nconst Action = props => {\n  console.log(props);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      onClick: props.editCb,\n      children: props.tr.edit ? \"保存\" : \"编辑\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 7,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      onClick: props.tr.edit ? props.saveCb : Number,\n      children: \"\\u53D6\\u6D88\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 6,\n    columnNumber: 5\n  }, this);\n};\n\n_c = Action;\nexport default class Test extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      headers: {\n        name: \"名称\",\n        path: \"路径映射\",\n        action: \"\"\n      },\n      trs: [{\n        name: \"定时任务\",\n        path: \"/xxxx\",\n        action: \"\",\n        edit: false\n      }, {\n        name: \"定时任务2\",\n        path: \"/yyyy\",\n        action: \"\",\n        edit: false\n      }]\n    };\n  }\n\n  onSave(data) {\n    //点击取消按钮时还原该行为显示狀态\n    data.edit = false;\n\n    if (data._initName !== undefined) {\n      data.name = data._initName;\n      data.path = data._initPath; //  data._initName = data._initPath = undefined\n\n      this.forceUpdate();\n    }\n  }\n\n  onEdit(data) {\n    //点击取消按钮时还原该行为编辑狀态，再点击还原\n    var editable = data.edit = !data.edit;\n\n    if (editable) {\n      data._name = data.name;\n      data._initName = data.name;\n      data.name = /*#__PURE__*/_jsxDEV(\"input\", {\n        defaultValue: data._name,\n        onInput: e => {\n          data._name = e.target.value;\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this);\n      data._path = data.path;\n      data._initPath = data.path;\n      data.path = /*#__PURE__*/_jsxDEV(\"input\", {\n        defaultValue: data._path,\n        onInput: e => {\n          data._path = e.target.value;\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this);\n      this.forceUpdate();\n    } else {\n      data.name = data._name;\n      data.path = data._path;\n      this.forceUpdate();\n    }\n  }\n\n  render() {\n    var headers = this.state.headers || {};\n    var keys = Object.keys(headers);\n    console.log(headers);\n    return /*#__PURE__*/_jsxDEV(\"table\", {\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: keys.map(key => /*#__PURE__*/_jsxDEV(\"th\", {\n            children: headers[key]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: this.state.trs.map(function (tr) {\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: keys.map(function (key, index) {\n              return /*#__PURE__*/_jsxDEV(\"td\", {\n                children: key === \"action\" ? /*#__PURE__*/_jsxDEV(Action, {\n                  tr: tr,\n                  saveCb: this.onSave.bind(this, tr),\n                  editCb: this.onEdit.bind(this, tr)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 25\n                }, this) : tr[key]\n              }, key, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 21\n              }, this);\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this);\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this);\n  }\n\n} // ReactDOM.render(<Table />, document.body);\n\nvar _c;\n\n$RefreshReg$(_c, \"Action\");","map":{"version":3,"sources":["E:/React/react_staging/src/pages/Test/index.jsx"],"names":["Component","Action","props","console","log","editCb","tr","edit","saveCb","Number","Test","constructor","context","state","headers","name","path","action","trs","onSave","data","_initName","undefined","_initPath","forceUpdate","onEdit","editable","_name","e","target","value","_path","render","keys","Object","map","key","index","bind"],"mappings":"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","sourcesContent":["import { Component } from \"react\";\r\n\r\nconst Action = (props) => {\r\n  console.log(props);\r\n  return (\r\n    <div>\r\n      <button type=\"button\" onClick={props.editCb}>\r\n        {props.tr.edit ? \"保存\" : \"编辑\"}\r\n      </button>\r\n      <button type=\"button\" onClick={props.tr.edit ? props.saveCb : Number}>\r\n        取消\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\nexport default class Test extends Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    this.state = {\r\n      headers: {\r\n        name: \"名称\",\r\n        path: \"路径映射\",\r\n        action: \"\",\r\n      },\r\n      trs: [\r\n        {\r\n          name: \"定时任务\",\r\n          path: \"/xxxx\",\r\n          action: \"\",\r\n          edit: false,\r\n        },\r\n        {\r\n          name: \"定时任务2\",\r\n          path: \"/yyyy\",\r\n          action: \"\",\r\n          edit: false,\r\n        },\r\n      ],\r\n    };\r\n  }\r\n  onSave(data) {\r\n    //点击取消按钮时还原该行为显示狀态\r\n    data.edit = false;\r\n    if (data._initName !== undefined) {\r\n      data.name = data._initName;\r\n      data.path = data._initPath;\r\n      //  data._initName = data._initPath = undefined\r\n      this.forceUpdate();\r\n    }\r\n  }\r\n  onEdit(data) {\r\n    //点击取消按钮时还原该行为编辑狀态，再点击还原\r\n    var editable = (data.edit = !data.edit);\r\n    if (editable) {\r\n      data._name = data.name;\r\n      data._initName = data.name;\r\n      data.name = (\r\n        <input\r\n          defaultValue={data._name}\r\n          onInput={(e) => {\r\n            data._name = e.target.value;\r\n          }}\r\n        />\r\n      );\r\n      data._path = data.path;\r\n      data._initPath = data.path;\r\n      data.path = (\r\n        <input\r\n          defaultValue={data._path}\r\n          onInput={(e) => {\r\n            data._path = e.target.value;\r\n          }}\r\n        />\r\n      );\r\n      this.forceUpdate();\r\n    } else {\r\n      data.name = data._name;\r\n      data.path = data._path;\r\n      this.forceUpdate();\r\n    }\r\n  }\r\n  render() {\r\n    var headers = this.state.headers || {};\r\n    var keys = Object.keys(headers);\r\n    console.log(headers);\r\n    return (\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            {keys.map((key) => (\r\n              <th>{headers[key]}</th>\r\n            ))}\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {this.state.trs.map(function (tr) {\r\n            return (\r\n              <tr>\r\n                {keys.map(function (key, index) {\r\n                  return (\r\n                    <td key={key}>\r\n                      {key === \"action\" ? (\r\n                        <Action\r\n                          tr={tr}\r\n                          saveCb={this.onSave.bind(this, tr)}\r\n                          editCb={this.onEdit.bind(this, tr)}\r\n                        />\r\n                      ) : (\r\n                        tr[key]\r\n                      )}\r\n                    </td>\r\n                  );\r\n                }, this)}\r\n              </tr>\r\n            );\r\n          }, this)}\r\n        </tbody>\r\n      </table>\r\n    );\r\n  }\r\n}\r\n\r\n// ReactDOM.render(<Table />, document.body);\r\n"]},"metadata":{},"sourceType":"module"}