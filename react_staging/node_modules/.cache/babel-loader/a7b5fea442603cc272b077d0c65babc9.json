{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"E:\\\\React\\\\react_staging\\\\src\\\\pages\\\\ArticleOnlineList\\\\Article-Item\\\\Article\\\\index.jsx\";\nimport React, { Component } from \"react\";\nimport axios from 'axios';\nimport \"./index.css\";\nexport default class Article extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.updateFavor = () => {\n      console.log('updateFavor');\n      const {\n        articleId,\n        favor,\n        isFavor,\n        dislike,\n        isDislike\n      } = this.state; //#region 点击后，当前bool值取反\n\n      if (!isFavor) {\n        //即点赞\n        axios.post(`https://qcpi7s.fn.thelarkcloud.com/increLikeCount`, {\n          articleId: articleId\n        }).then(response => {\n          console.log('点赞', response.data.result);\n        }, error => {\n          console.log(\"失败了\", error.message);\n        });\n      } else {\n        //即取消点赞\n        axios.post(`https://qcpi7s.fn.thelarkcloud.com/decrLikeCount`, {\n          articleId: articleId\n        }).then(response => {\n          console.log('取消点赞', response.data.result);\n        }, error => {\n          console.log(\"失败了\", error.message);\n        });\n      }\n\n      if (!isFavor && isDislike) {\n        //点踩后点赞，则要取消点踩，并点赞 点赞操作已完成，此处取消点踩即可\n        axios.post(`https://qcpi7s.fn.thelarkcloud.com/decrDislikeCount`, {\n          articleId: articleId\n        }).then(response => {\n          console.log('点赞后取消点踩', response.data.result);\n        }, error => {\n          console.log(\"失败了\", error.message);\n        });\n      } //#endregion\n\n\n      this.setState({\n        favor: !isFavor ? favor + 1 : favor - 1,\n        isFavor: !isFavor,\n        dislike: !isFavor && isDislike ? dislike - 1 : dislike,\n        isDislike: !isFavor && isDislike ? !isDislike : isDislike\n      }); // console.log(this);\n    };\n\n    this.updateDislike = () => {\n      const {\n        articleId,\n        dislike,\n        isDislike,\n        favor,\n        isFavor\n      } = this.state; //#region 点击后，当前bool值取反\n\n      if (!isDislike) {\n        //即点踩\n        axios.post(`https://qcpi7s.fn.thelarkcloud.com/increDislikeCount`, {\n          articleId: articleId\n        }).then(response => {\n          console.log('点踩', response.data.result);\n        }, error => {\n          console.log(\"失败了\", error.message);\n        });\n      } else {\n        //即取消点踩\n        axios.post(`https://qcpi7s.fn.thelarkcloud.com/decrDislikeCount`, {\n          articleId: articleId\n        }).then(response => {\n          console.log('取消点踩', response.data.result);\n        }, error => {\n          console.log(\"失败了\", error.message);\n        });\n      }\n\n      if (isFavor && !isDislike) {\n        //点赞后点踩，则要取消点赞，并点踩 点踩操作已完成，此处取消点赞即可\n        axios.post(`https://qcpi7s.fn.thelarkcloud.com/decrLikeCount`, {\n          articleId: articleId\n        }).then(response => {\n          console.log('点赞', response.data.result);\n        }, error => {\n          console.log(\"失败了\", error.message);\n        });\n      } //#endregion\n\n\n      this.setState({\n        dislike: !isDislike ? dislike + 1 : dislike - 1,\n        isDislike: !isDislike,\n        favor: !isDislike && isFavor ? favor - 1 : favor,\n        isFavor: !isDislike && isFavor ? !isFavor : isFavor\n      }); // console.log(this);\n    };\n  }\n\n  componentDidMount() {\n    console.log(this.props.match.params.articleId);\n    axios.post(`https://qcpi7s.fn.thelarkcloud.com/getArticleById`, {\n      articleId: this.props.match.params.articleId\n    }).then(response => {\n      console.log(response.data.result);\n      const {\n        articleId,\n        title,\n        source,\n        updatedAt,\n        content,\n        likeCount,\n        dislikeCount\n      } = response.data.result;\n      this.setState({\n        articleId,\n        title,\n        source,\n        updatedAt,\n        content,\n        favor: likeCount,\n        dislike: dislikeCount\n      });\n    }, error => {\n      console.log(\"失败了\", error.message);\n    });\n  }\n\n  render() {\n    // console.log('article render');\n    const {\n      title,\n      source,\n      updatedAt,\n      content,\n      favor,\n      dislike,\n      isFavor,\n      isDislike\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"article-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"article-meta\",\n        children: [source, \"\\xA0\\xA0\", updatedAt]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content-box\",\n        children: content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"favor-dislike\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          onClick: this.updateFavor,\n          style: {\n            backgroundColor: isFavor ? 'lightblue' : '#ccc'\n          },\n          children: [\"\\u8D5E  \", favor]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          onClick: this.updateDislike,\n          style: {\n            backgroundColor: isDislike ? 'lightblue' : '#ccc'\n          },\n          children: [\"\\u8E29  \", dislike]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["E:/React/react_staging/src/pages/ArticleOnlineList/Article-Item/Article/index.jsx"],"names":["React","Component","axios","Article","updateFavor","console","log","articleId","favor","isFavor","dislike","isDislike","state","post","then","response","data","result","error","message","setState","updateDislike","componentDidMount","props","match","params","title","source","updatedAt","content","likeCount","dislikeCount","render","backgroundColor"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from 'axios'\r\nimport \"./index.css\";\r\nexport default class Article extends Component {\r\n  /* state = {\r\n    title: \"\",\r\n    source: \"\",\r\n    updatedAt: \"\",\r\n    content:\"\",\r\n    favor: 0,\r\n    isFavor: false,\r\n    dislike: 0,\r\n    isDislike: false,\r\n  }; */\r\n  //更新点赞数\r\n  updateFavor = () => {\r\n    console.log('updateFavor');\r\n    const { articleId,favor, isFavor,dislike,isDislike } = this.state;\r\n    //#region 点击后，当前bool值取反\r\n    if(!isFavor){\r\n      //即点赞\r\n      axios.post(`https://qcpi7s.fn.thelarkcloud.com/increLikeCount`,{\r\n        articleId:articleId\r\n      }).then(\r\n        response => {\r\n          console.log('点赞',response.data.result);\r\n        },\r\n        error => {\r\n          console.log(\"失败了\",error.message);\r\n        }\r\n      )\r\n    }else {\r\n      //即取消点赞\r\n      axios.post(`https://qcpi7s.fn.thelarkcloud.com/decrLikeCount`,{\r\n        articleId:articleId\r\n      }).then(\r\n        response => {\r\n          console.log('取消点赞',response.data.result);\r\n        },\r\n        error => {\r\n          console.log(\"失败了\",error.message);\r\n        }\r\n      )\r\n    }\r\n    if(!isFavor&&isDislike){\r\n      //点踩后点赞，则要取消点踩，并点赞 点赞操作已完成，此处取消点踩即可\r\n      axios.post(`https://qcpi7s.fn.thelarkcloud.com/decrDislikeCount`,{\r\n        articleId:articleId\r\n      }).then(\r\n        response => {\r\n          console.log('点赞后取消点踩',response.data.result);\r\n        },\r\n        error => {\r\n          console.log(\"失败了\",error.message);\r\n        }\r\n      )\r\n    }\r\n    //#endregion\r\n    this.setState({\r\n      favor: !isFavor ? favor + 1 : favor - 1,\r\n      isFavor: !isFavor,\r\n      dislike:!isFavor&&isDislike?dislike-1:dislike,\r\n      isDislike:!isFavor&&isDislike?!isDislike:isDislike\r\n    });\r\n    // console.log(this);\r\n  };\r\n  //更新踩\r\n  updateDislike=()=>{\r\n    const { articleId,dislike, isDislike,favor, isFavor } = this.state;\r\n    //#region 点击后，当前bool值取反\r\n    if(!isDislike){\r\n      //即点踩\r\n      axios.post(`https://qcpi7s.fn.thelarkcloud.com/increDislikeCount`,{\r\n        articleId:articleId\r\n      }).then(\r\n        response => {\r\n          console.log('点踩',response.data.result);\r\n        },\r\n        error => {\r\n          console.log(\"失败了\",error.message);\r\n        }\r\n      )\r\n    }else {\r\n      //即取消点踩\r\n      axios.post(`https://qcpi7s.fn.thelarkcloud.com/decrDislikeCount`,{\r\n        articleId:articleId\r\n      }).then(\r\n        response => {\r\n          console.log('取消点踩',response.data.result);\r\n        },\r\n        error => {\r\n          console.log(\"失败了\",error.message);\r\n        }\r\n      )\r\n    }\r\n    if(isFavor&&!isDislike){\r\n      //点赞后点踩，则要取消点赞，并点踩 点踩操作已完成，此处取消点赞即可\r\n      axios.post(`https://qcpi7s.fn.thelarkcloud.com/decrLikeCount`,{\r\n        articleId:articleId\r\n      }).then(\r\n        response => {\r\n          console.log('点赞',response.data.result);\r\n        },\r\n        error => {\r\n          console.log(\"失败了\",error.message);\r\n        }\r\n      )\r\n    }\r\n    //#endregion\r\n    this.setState({\r\n      dislike: !isDislike ? dislike + 1 : dislike - 1,\r\n      isDislike: !isDislike,\r\n      favor:!isDislike&&isFavor?favor-1:favor,\r\n      isFavor:!isDislike&&isFavor?!isFavor:isFavor\r\n    });\r\n    // console.log(this);\r\n  }\r\n  componentDidMount(){\r\n    console.log(this.props.match.params.articleId);\r\n    axios.post(`https://qcpi7s.fn.thelarkcloud.com/getArticleById`,{\r\n      articleId:this.props.match.params.articleId\r\n    }).then(\r\n      response => {\r\n        console.log(response.data.result);\r\n        const {articleId,title,source,updatedAt,content,likeCount,dislikeCount} = response.data.result\r\n        this.setState({articleId,title,source,updatedAt,content,favor:likeCount,dislike:dislikeCount})\r\n      },\r\n      error => {\r\n        console.log(\"失败了\",error.message);\r\n      }\r\n    )\r\n  }\r\n  \r\n  render() {\r\n    // console.log('article render');\r\n    const { title, source, updatedAt, content, favor, dislike, isFavor,isDislike } = this.state;\r\n    return (\r\n      <div className=\"article-content\">\r\n        <h1>{title}</h1>\r\n        <div className=\"article-meta\">\r\n          {source}&nbsp;&nbsp;{updatedAt}\r\n        </div>\r\n        <div className=\"content-box\">{content}</div>\r\n        <div className=\"favor-dislike\">\r\n          <button className=\"btn\" onClick={this.updateFavor} style={{backgroundColor:isFavor?'lightblue':'#ccc'}}>赞  {favor}</button>\r\n          <button className=\"btn\" onClick={this.updateDislike} style={{backgroundColor:isDislike?'lightblue':'#ccc'}}>踩  {dislike}</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}